<?xml version="1.0" encoding="utf-8" ?>
<Missions>
  <Override>
    <OutpostMission
      identifier="poisonchalice"
      name="missionname.poisonchalice"
      successmessage="missionsuccess.poisonchalicewin"
      failuremessage="missionfailure.poisonchalicefail"
      tags="assasination"
      achievementidentifier="abandonedoutpostassassinate"
      type="OutpostDestroy"
      reward="3000"
      difficulty="3"
      commonness="100"
      allowretry="true"
      sonarlabel="target">
      <Icon texture="Content/UI/MissionIcons.png" sourcerect="0,512,256,256" color="214,50,48"/>
      <LocationType identifier="huskchurch" />
      <TriggerEvent state="0" delay="1" eventidentifier="poisonchaliceevent" campaignonly="true"/>
      <message header="missionheader0.assassinatehuskresearcher" text="Put Calyx in the Cup"/>
      <Reputation identifier="coalition" amount="15" />    
      <Reputation identifier="huskcult" amount="-10" amountforopposingfaction="10" />
      <CompleteCheckDataAction identifier="poisonedchalicecomplete" condition="eq 1"/>       
      <Metadata identifier="poisonchalicemissionnorepeat" value="1"/>
    </OutpostMission>

    <!-- Husk specific missions -->

    <CargoMission
      identifier="huskmedicalcargo"
      tags="cargohusk"
      type="Cargo"
      difficulty="1"
      commonness="100"
      achievementidentifier="cargomission">
      <Items>
        <Item identifier="mediccrate" reward="250" maxcount="10">
          <Item identifier="antibiotics" amount="5"/>
          <Item identifier="stabilozine" amount="3"/>
        </Item>
      </Items>
      <Reputation identifier="huskcult" amount="3" />
      <Icon texture="Content/UI/MissionIcons2.png" sourcerect="512,256,256,256" color="40,140,80"/>
      <LocationType from="huskchurch" to="City"/>
      <LocationType from="huskchurch" to="Outpost"/>
      <LocationType from="huskchurch" to="Military"/>
      <LocationType from="huskchurch" to="Research"/>
      <LocationType from="huskchurch" to="Mine"/>    
    </CargoMission>

    <CargoMission
      identifier="huskeggsmuggling"
      tags="cargohusk,cargosmugglinghusk"
      type="Cargo"
      difficulty="1"
      commonness="100"
      achievementidentifier="cargomission">
      <Items>
        <Item identifier="mediccrate" reward="500" maxcount="5">
          <Item identifier="antidama1" amount="2"/>
          <Item identifier="antidama2" amount="2"/>
          <Item identifier="antibloodloss1" amount="1"/>
          <Item identifier="antibleeding1" amount="2"/>
          <Item identifier="antibleeding3" amount="2"/>
          <Item identifier="syringegun" amount="2">
            <Item identifier="huskeggs" amount="4"/>
          </Item>
        </Item>
      </Items>
      <Reputation identifier="huskcult" amount="5" />
      <Icon texture="Content/UI/MissionIcons2.png" sourcerect="512,256,256,256" color="40,140,80"/>
      <LocationType from="huskchurch" to="City"/>
      <LocationType from="huskchurch" to="Outpost"/>
      <LocationType from="huskchurch" to="Military"/>
      <LocationType from="huskchurch" to="Research"/>
      <LocationType from="huskchurch" to="Mine"/>    
    </CargoMission>

    <EscortMission
      identifier="escorthuskvip"
      tags="escortVIP,escort"
      type="Escort"
      difficulty="2"
      commonness="100"
      reward="3000"
      achievementidentifier="escortmission">
      <Characters>
        <Character from="husknpcsmission" identifier="huskvip" escortidentifier="vip" color="40,140,80">
          <StatusEffect target="Character" delay="1" disabledeltatime="true">
            <Affliction identifier="husksymbiosis" probability="1" strength="100" />
          </StatusEffect>
        </Character>  
        <Character from="husknpcsmission" identifier="huskbodyguard"/>
        <Character from="husknpcsmission" identifier="huskbodyguard"/>
      </Characters>
      <Reputation identifier="huskcult" amount="7" amountforopposingfaction="-7" />
      <Icon texture="Content/UI/MissionIcons.png" sourcerect="256,512,256,256" color="40,140,80" />
      <LocationType from="huskchurch" to="huskchurch"/>
      <LocationType from="huskchurch" to="Research"/>
      <LocationType from="Research" to="huskchurch"/>
      <message header="missionheader0.escort2" text="missionmessage0.escort2"/>
    </EscortMission>

    <MineralMission
      identifier="slimecollection"
      textIdentifier="slimecollection"
      tags="collectplants,collectplants_set1,collectplants_cave"
      type="Mineral"
      difficulty="1"
      commonness="100"
      resourceHandoverAmount="1"
      positionType="cave"
      reward="2000">
      <Items>
        <Item identifier="slimebacteria" />
        <Item identifier="slimebacteria" />
        <Item identifier="slimebacteria" />
        <Item identifier="slimebacteria" />
        <Item identifier="slimebacteria" />      
      </Items>
      <Icon texture="Content/UI/MissionIcons2.png" sourcerect="256,0,256,256" color="40,140,80"/>
      <LocationType from="AnyOutpost" to="huskchurch"/>
      <Reputation identifier="huskcult" amount="3" />
      <message header="missionheader0.slimecollection" text="missionmessage0.slimecollection"/>
    </MineralMission>  
    
    <EscortMission
      identifier="escorthuskterrorist"
      tags="escortterrorists,escortterroristshusk,escort"
      type="Escort"
      difficulty="2"
      commonness="100"
      reward="2500"
      achievementidentifier="escortmission"
      baseescortedcharacters="1"
      scalingescortedcharacters="0.35"
      terroristchance="0.35"
      terroristannouncedialogtag="huskterroristannounce">
      <Characters>
        <Character from="escortnpcs1" identifier="commoner" />
      </Characters>
      <TerroristItems>
        <Item identifier="cultistrobes" equip="true" mindifficulty="0"/>    
        <Item identifier="divingknife" mindifficulty="0"/>      
        <Item identifier="syringegun" equip="true" mindifficulty="20">
          <Item identifier="sulphuricacidsyringe" />
          <Item identifier="sulphuricacidsyringe" />
          <Item identifier="sulphuricacidsyringe" />
          <Item identifier="sulphuricacidsyringe" />
        </Item>
        <Item identifier="volatilecompoundn" mindifficulty="40"/>
        <Item identifier="divingknifeunique" mindifficulty="60"/>
      </TerroristItems>
      <Reputation identifier="location" amount="5" />
      <Icon texture="Content/UI/MissionIcons.png" sourcerect="768,512,256,256" color="243,146,55" />
      <LocationType from="AnyOutpost" to="AnyOutpost" />
      <message header="missionheader0.escorthuskterrorist" text="missionmessage0.escorthuskterrorist"/>
      <message header="missionheader1.escorthuskterrorist" text="missionmessage1.escorthuskterrorist"/>
    </EscortMission>  
    

    <OutpostMission
      identifier="jailbreak_husk"
      name="missionname.jailbreak_husk"
      successmessage="missionsuccess.jailbreak"
      failuremessage="missionfailure.jailbreak"
      tags="jailbreak_husk"
      achievementidentifier="jailbreak_husk"
      type="AbandonedOutpost"
      reward="3000"
      difficulty="3"
      commonness="100"
      allowretry="true"
      hostageskilledmessage="prisonerkilled">
      <Icon texture="Content/UI/MissionIcons.png" sourcerect="512,256,256,256" color="40,140,80"/>
      <LocationType identifier="City" />
      <LocationType identifier="Military" />
      <Characters>
        <Character identifier="prisonerhusk" from="husknpcsmission" spawnpointtags="jail" spawnpointtype="corpse" requirerescue="true"/>
      </Characters>
      <TriggerEvent state="0" eventidentifier="jailbreak" />
      <Reputation identifier="huskcult" amount="5" />
      <Reputation identifier="location" amount="-5" />     
      <message header="missionheader0.prisonerrescue" text="missionmessage0.prisonerrescue"/>
    </OutpostMission>

    <!-- add event? -->
    <AbandonedOutpostMission
      identifier="assassinatehuskresearcher"
      tags="assasination"
      achievementidentifier="abandonedoutpostassassinate"
      type="OutpostDestroy"
      reward="3000"
      difficulty="3"
      commonness="100"
      allowretry="true"
      sonarlabel="target">
      <Icon texture="Content/UI/MissionIcons.png" sourcerect="0,512,256,256" color="214,50,48"/>
      <LocationType identifier="huskchurch" />
      <Characters>
        <Character identifier="huskassassinationtarget" from="husknpcsmission" moduleflags="researchchurch" teamid="FriendlyNpc" requirekill="true" color="180,50,120"/>
      </Characters>
      <!-- <TriggerEvent state="0" delay="5" eventidentifier="" campaignonly="true"/> -->
      <message header="missionheader0.assassinatehuskresearcher" text="missionmessage0.assassinatehuskresearcher"/>
      <Reputation identifier="coalition" amount="15" />    
      <Reputation identifier="huskcult" amount="-25" amountforopposingfaction="10" />
      <Metadata identifier="assassinatehuskresearchernorepeat" value="1"/>
    </AbandonedOutpostMission>

      <!-- not possible to spawn custom beacons, maybe do custom shuttle-->
  <!--   <BeaconMission
      identifier="beaconspecialhusk"
      textidentifier="beaconspecialhusk"
      achievementidentifier="beaconmission"
      tags="beacon"
      type="Beacon"
      difficulty="2"
      commonness="100"
      reward="1500">
      <SubmarineTypes>
        <Submarine path="Content/Map/BeaconStations/BeaconStation2_AlienResearch.sub" faction="huskcult" alternatereward="3200"/>
      </SubmarineTypes>
      <monsters commonness="100">
        <monster character="Crawler" min="0" max="8"/>      
      </monsters>
      <monsters commonness="50">
        <monster character="Mudraptor" min="0" max="1"/>
        <monster character="Mudraptor_unarmored" min="0" max="3"/>
      </monsters>
      <monsters commonness="40">
        <monster character="Husk" min="0" max="5"/>
      </monsters>
      <monsters commonness="20">
        <monster character="Tigerthresher" min="0" max="2"/>
        <monster character="Bonethresher" min="0" max="1"/>
      </monsters>    
      <Icon texture="Content/UI/MissionIcons.png" sourcerect="0,256,256,256" color="243,146,55"/>
      <message text="missionmessage0.beaconspecialhusk" />
    </BeaconMission> -->
    
    <PirateMission
      type="Pirate"
      identifier="huskcultattack1"
      tags="huskcultattack"
      showinmenus="false"
      showstartmessage="false"
      issideobjective="true"
      achievementidentifier="combatmissionseparatistsvscoalition"
      difficulty="4"
      commonness="0"
      reward="0"
      addedmissiondifficultyperplayer="8">
      <Reputation identifier="huskchurch" amount="-5"/>
      <SubmarineTypes>
        <Submarine path="%Moddir%/huskedsub.sub" faction="huskcult" preferreddifficulty="40" alternatereward="3200"/>
      </SubmarineTypes>
      <Characters>
        <Character typeidentifier="huskcultcaptain" minamount="1" maxamount="1"/>
        <Character typeidentifier="huskcultsecurity" minamount="1" maxamount="5" />
        <Character typeidentifier="huskcultmechanic" minamount="1" maxamount="1" />
        <Character typeidentifier="huskcultengineer" minamount="1" maxamount="1" />
      </Characters>
      <CharacterTypes>
        <CharacterType typeidentifier="huskcultcaptain">
          <Character identifier="huskcultcaptain" from="combatmissionhuskcultnpcs" preferreddifficulty="50" iscommander="true" >
            <StatusEffect target="Character" delay="1" disabledeltatime="true">
              <Affliction identifier="husksymbiosis" probability="1" strength="100" />
            </StatusEffect>
          </Character>
          <Character identifier="huskcultcaptainlord" from="combatmissionhuskcultnpcs" preferreddifficulty="90" iscommander="true" >
            <StatusEffect target="Character" delay="1" disabledeltatime="true">
              <Affliction identifier="husksymbiosis" probability="1" strength="100" />
            </StatusEffect>
          </Character>
        </CharacterType>
        <CharacterType typeidentifier="huskcultsecurity">
          <Character identifier="huskcultsecurityrecruit" from="combatmissionhuskcultnpcs" preferreddifficulty="40"/>
          <Character identifier="huskcultsecurityelite" from="combatmissionhuskcultnpcs" preferreddifficulty="70">
            <StatusEffect target="Character" delay="1" disabledeltatime="true">
              <Affliction identifier="husksymbiosis" probability="1" strength="100" />
            </StatusEffect>
          </Character>
        </CharacterType>
        <CharacterType typeidentifier="huskcultmechanic">
          <Character identifier="huskcultmechanicrecruit" from="combatmissionhuskcultnpcs" preferreddifficulty="40"/>
          <Character identifier="huskcultmechanicveteran" from="combatmissionhuskcultnpcs" preferreddifficulty="70">
            <StatusEffect target="Character" delay="1" disabledeltatime="true">
              <Affliction identifier="husksymbiosis" probability="1" strength="100" />
            </StatusEffect>
          </Character>
        </CharacterType>
        <CharacterType typeidentifier="huskcultengineer">
          <Character identifier="huskcultengineerrecruit" from="combatmissionhuskcultnpcs" preferreddifficulty="40"/>
          <Character identifier="huskcultengineerveteran" from="combatmissionhuskcultnpcs" preferreddifficulty="70">
            <StatusEffect target="Character" delay="1" disabledeltatime="true">
              <Affliction identifier="husksymbiosis" probability="1" strength="100" />
            </StatusEffect>
          </Character>
        </CharacterType>
      </CharacterTypes>
      <Icon texture="Content/UI/MissionIcons.png" sourcerect="0,768,256,256" color="243,146,55"/>
      <message header="missionheader0.huskcultattack1" text="missionmessage0.huskcultattack1"/>
      <LocationType from="AnyOutpost" to="AnyOutpost" />
    </PirateMission>   

    <PirateMission
      type="Pirate"
      identifier="huskcultinterception" 
      achievementidentifier="combatmissionseparatistsvscoalition"
      difficulty="4"
      commonness="0"
      reward="0"
      addedmissiondifficultyperplayer="8">
      <Reputation identifier="separatists" amount="15" amountforopposingfaction="-5" />
      <Reputation identifier="huskchurch" amount="-15" />
      <SubmarineTypes>
        <Submarine path="%Moddir%/huskedsub.sub" faction="huskcult" preferreddifficulty="10" alternatereward="3200"/>
      </SubmarineTypes>
      <Characters>
        <Character typeidentifier="huskcultcaptain" minamount="1" maxamount="1"/>
        <Character typeidentifier="huskcultsecurity" minamount="1" maxamount="3" />
        <Character typeidentifier="huskcultmechanic" minamount="1" maxamount="1" />
        <Character typeidentifier="huskcultengineer" minamount="1" maxamount="1" />
        <Character typeidentifier="huskcultvip" minamount="1" maxamount="1" >
          <StatusEffect target="Character" delay="10">
            <Affliction identifier="nausea" probability="1" strength="100" />
          </StatusEffect>
        </Character>
      </Characters>
      <CharacterTypes>
        <CharacterType typeidentifier="huskcultcaptain">
          <Character identifier="huskcultcaptain" from="combatmissionhuskcultnpcs" preferreddifficulty="50" iscommander="true" >
            <StatusEffect target="Character" delay="1" disabledeltatime="true">
              <Affliction identifier="husksymbiosis" probability="1" strength="100" />
            </StatusEffect>
          </Character>
          <Character identifier="huskcultcaptainlord" from="combatmissionhuskcultnpcs" preferreddifficulty="90" iscommander="true" >
            <StatusEffect target="Character" delay="1" disabledeltatime="true">
              <Affliction identifier="husksymbiosis" probability="1" strength="100" />
            </StatusEffect>
          </Character>
        </CharacterType>
        <CharacterType typeidentifier="huskcultsecurity">
          <Character identifier="huskcultsecurityrecruit" from="combatmissionhuskcultnpcs" preferreddifficulty="40"/>
          <Character identifier="huskcultsecurityelite" from="combatmissionhuskcultnpcs" preferreddifficulty="70">
            <StatusEffect target="Character" delay="1" disabledeltatime="true">
              <Affliction identifier="husksymbiosis" probability="1" strength="100" />
            </StatusEffect>
          </Character>
        </CharacterType>
        <CharacterType typeidentifier="huskcultmechanic">
          <Character identifier="huskcultmechanicrecruit" from="combatmissionhuskcultnpcs" preferreddifficulty="40"/>
          <Character identifier="huskcultmechanicveteran" from="combatmissionhuskcultnpcs" preferreddifficulty="70">
            <StatusEffect target="Character" delay="1" disabledeltatime="true">
              <Affliction identifier="husksymbiosis" probability="1" strength="100" />
            </StatusEffect>
          </Character>
        </CharacterType>
        <CharacterType typeidentifier="huskcultengineer">
          <Character identifier="huskcultengineerrecruit" from="combatmissionhuskcultnpcs" preferreddifficulty="40"/>
          <Character identifier="huskcultengineerveteran" from="combatmissionhuskcultnpcs" preferreddifficulty="70">
            <StatusEffect target="Character" delay="1" disabledeltatime="true">
              <Affliction identifier="husksymbiosis" probability="1" strength="100" />
            </StatusEffect>
          </Character>
        </CharacterType>
        <CharacterType typeidentifier="huskcultvip">
          <Character identifier="huskvip" from="husknpcsmission" color="40,140,80">
            <StatusEffect target="Character" delay="1" disabledeltatime="true">
              <Affliction identifier="husksymbiosis" probability="1" strength="100" />
            </StatusEffect>
          </Character> 
        </CharacterType>
      </CharacterTypes>
      <Icon texture="Content/UI/MissionIcons.png" sourcerect="0,768,256,256" color="243,146,55"/>
      <message header="missionheader0.huskcultinterception" text="missionmessage0.huskcultinterception"/>
      <LocationType from="AnyOutpost" to="AnyOutpost" />
      <Metadata identifier="huskinterceptionmissionnorepeat" value="1"/>
    </PirateMission> 


    <!-- TODO: enable this + create mission event if devs ever allow  specifying custom beacons in missions -->
  <!--   <BeaconMission
      identifier="huskbeaconmission"
      textidentifier="beaconmission"
      achievementidentifier="beaconmission"
      tags="huskbeaconmission"
      type="Beacon"
      difficulty="1"
      reward="1500"
      sideobjective="false">
      <Reputation identifier="huskchurch" amount="5" />
      <SubmarineTypes>
        <Submarine path="%ModDir%/Beacons/BeaconHusk.sub" faction="huskcult" />
      </SubmarineTypes>
      <TriggerEvent state="1" delay="5" eventidentifier="huskencounter" campaignonly="true"/>
      <Icon texture="Content/UI/MissionIcons.png" sourcerect="0,256,256,256" color="50,150,120"/>
      <message text="Husked beacon" />
      <Metadata identifier="huskbeacon_active" value="true"/>
    </BeaconMission> -->

    <!-- CLOWNS -->

    <GotoMission
      name=""
      identifier="gotohiddenandclowngerous"
      type="GoTo"
      difficulty="1"
      commonness="0"
      reward="0"
      BlockLocationTypeChanges="true">
      <Icon texture="Content/UI/MissionIcons2.png" sourcerect="768,256,256,256" color="80,225,55"/>
      <TriggerEvent state="1" delay="5" eventidentifier="hiddenandclowngerous" campaignonly="true"/>
      <LocationType identifier="huskchurch" />
    </GotoMission>
  </Override>
</Missions>
